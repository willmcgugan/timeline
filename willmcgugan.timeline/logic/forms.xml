<?xml version="1.0" encoding="UTF-8"?>
<moya xmlns="http://moyaproject.com"
	xmlns:w="http://moyaproject.com/widgets"
    xmlns:m="http://moyaproject.com">

    <choices libname="choices.markup">
        <choice value="text" label="Text"/>
        <choice value="bbcode" label="BBCode"/>
        <choice value="markdown" label="Markdown"/>
        <choice value="html" label="HTML"/>
    </choices>

    <choices libname="choices.event">
        <choice value="text"/>
        <choice value="image"/>
    </choices>

    <form libname="form.event" legend="New Event" style="horizontal" xmlns="http://moyaproject.com/forms">
    	<input name="stream" label="Stream" placeholder="UUID or slug" required="yes"/>
    	<input name="password" label="Password" placeholder="Stream password or API key"/>
        <input name="title" label="Title" placeholder="Descriptive title of this event"/>
        <input name="time" label="Time" type="integer" placeholder="epoch time (leave blank for current time)"/>
        <select name="type" maxlength="30" label="Event Type">
            <m:for src="data:'event_types.json'" dst="type">
                <option value="${type}"/>
            </m:for>
        </select>
        <select name="priority" label="Priority" initial="0">
            <m:for src="(-10)..(10)" dst="p">
                <option value="${p}"/>
            </m:for>
        </select>
        <select name="markup" maxlength="20" label="Markup" initial="'markdown'">
            <option value="markdown"/>
            <option value="text"/>
            <option value="html"/>
        </select>
        <input name="generator" label="Generator" placeholder="Name of device that generated this event" required="yes"/>
        <text-area name="text" label="Text"/>
        <upload name="image" label="Upload"/>
        <submit-button text="Upload"/>

        <validate-field field="image">
            <fail if="values.type=='image' and not bool:.request.FILES.image">Required for image type</fail>
        </validate-field>
    </form>


    <form libname="form.stream.new" style="horizontal" xmlns="http://moyaproject.com/forms">
        <input name="title" label="Title"/>
        <text-area name="description" maxlength="100" help="max 100 characters"/>
        <submit-button text="Create Stream"/>
    </form>

    <form libname="form.stream.edit" style="horizontal" xmlns="http://moyaproject.com/forms">
        <hidden-input name="action" initial="'edit'"/>
        <input src="title" dst="title" name="title" label="Title" required="yes"/>
        <text-area src="description" dst="description" name="description" label="Description" maxlength="100" help="max 100 characters"/>
        <submit-button class="btn btn-round" text="Save"/>
    </form>
</moya>
